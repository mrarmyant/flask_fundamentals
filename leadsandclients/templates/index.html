<html>
<head>
    <title>Leads!</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

     <style>
    .edit-input {
        display:none;
}
</style>
    <script type="text/javascript" src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
                    <script type="text/javascript">
                    $(document).ready(function(){
                         $("#addcustomers").click(function(){
                            $(".addcustomer").slideToggle();
                            var element = document.getElementById("addcustomers");
                            element.classList.toggle("btn-primary");
                            element.classList.toggle("btn-secondary");
                          });
                          $("#edit").click(function(){
                            $(".textedit").toggle();
                            $(".editcusts").toggle();
                          });
                          $("#save").click(function(){
                            document.getElementById("#savechanges").submit();
                          });




                    });

                    window.onload = function() {
	                    $("#chartContainer").CanvasJSChart({
	                	title: {
            			text: "Leads Generated by Customer",
            			fontSize: 24
            		},
            		axisY: {
            			title: "Leads"
            		},
            		legend :{
            			verticalAlign: "center",
            			horizontalAlign: "right"
            		},
            		data: [
            		{
            			type: "pie",
            			showInLegend: true,
            			toolTipContent: "{label} <br/> {y} Leads",
            			indexLabel: "{y} Leads",
                			dataPoints: [
                			    {%for i in customers%}
                				    { label: "{{i['last_name']}}",  y: {{i['leads']}}, legendText: "{{ i['first_name'] }} {{ i['last_name'] }}"},
                				{%endfor%}
                			]
                		}
                		]
                   	});
                }

                </script>


</head>

<body>
    <main role="main">
        <section class="jumbotron text-center">
            <div class="container">
                <h1 class="jumbotron-heading">Leads!</h1>
                <p class="lead text-muted"> Let's reinvent the wheel.  Salesforce Sucks.</p>
            </div>
        </section>

            <div class="container">
                <div id="chartContainer" style="width: 100%; height: 300px"></div>
                <div class="row">



                    <table class="table table-striped table-hover">
                            <tr>
                                <th>Name</th>
                                <th class="text-center">Leads</th>
                                <th class="text-center">Remove Client</th>
                            </tr>
                        <tbody><form action='/editusers' id="savechanges">
                            {% for i in customers %}
                            <tr>
                                <td><span class="textedit">{{ i['first_name'] }} {{ i['last_name'] }}</span> <input type="text" class="form-control textedit" name="name" value="{{ i['first_name'] }} {{ i['last_name'] }}" style="display:none;"></td>

                                <td align="center"><span class="textedit">{{ i['leads'] }}</span> <input type="text" class="form-control textedit" name="leads" id="{{ i['id'] }}"value="{{ i['leads'] }}" style="display:none;"></td>

      <form action='/del' method='POST'><input type="hidden" name="id" value="{{ i['id'] }}"><td align="center"><button class="btn btn-danger btn-sm" type="submit" >DEL</button></td></form>
                            </tr>
                            {%endfor%}
                            </form>
                        </tbody>
                    </table>




                   <div class="col-md-6 mb-3" align="center"> <button id="addcustomers" class="w-50 btn btn-primary btn-lg">
                        Create A Customer
                    </button></div>
                    <div class="col-md-6 mb-3" align="center">
                    <button id="edit" class="w-50 btn btn-primary btn-lg editcusts">
                        Edit Customers
                    </button>
                    <button id="save"class="w-50 btn btn-success btn-lg editcusts" style="display:none;">
                        Save Changes
                    </button>
                    </div>
                </div>



                <form action='/customers' method='POST' class="addcustomer" style="display:none;">
                    <h4 class="mb-3" id='info'>Your Information</h4>
                    {% with messages = get_flashed_messages() %}
                        {% if messages %}
                            {% for message in messages %}
                                <p>{{message}}</p>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="first_name">First Name</label>
                            <input type="text" class="form-control" name="first_name" placeholder="John" value="">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="last_name">Last Name</label>
                            <input type="text" class="form-control" name="last_name" placeholder="Doe" value="">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="leads">Number of Leads:</label>
                        <input type="text" class="form-control" name="leads" placeholder="2">
                    </div>

                    <button class="btn btn-primary btn-lg btn-block" type="submit">Add Customer</button>

                </form>
<br>

            </div>

    </main>

</body>

</html>